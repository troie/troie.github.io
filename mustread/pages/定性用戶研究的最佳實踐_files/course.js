"use strict";var _createClass=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}();function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}require(["require.config"],function(){require(["modules/countdown","waypoints.inview"],function(e){var t=function(){function t(n,i){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:function(){};_classCallCheck(this,t),this._clock=n,this._iterateElementObject();var o=new Date(1e3*i),u=this._calcTimeDuration(o);if(!(isNaN(u)||u<=0)){var s=this._determineCountdownInterval(u);new e({dateEnd:o,interval:s,onTick:this._onCourseTimeTicked.bind(this),onEnd:r})}}return _createClass(t,null,[{key:"SINGULAR_UNITS",get:function(){return{days:"day",hours:"hr",minutes:"min",seconds:"sec"}}}]),_createClass(t,[{key:"_onCourseTimeTicked",value:function(e,t){this._update(e),this._previousCountdownProps=e,this._determineToUpdateInterval(t.interval,e.days)&&(t.interval=1e3)}},{key:"_iterateElementObject",value:function(){this._numberElements={days:this._clock.querySelector(".day .number"),hours:this._clock.querySelector(".hour .number"),minutes:this._clock.querySelector(".minute .number"),seconds:this._clock.querySelector(".second .number")},this._unitElements={days:this._clock.querySelector(".day .unit"),hours:this._clock.querySelector(".hour .unit"),minutes:this._clock.querySelector(".minute .unit"),seconds:this._clock.querySelector(".second .unit")}}},{key:"_update",value:function(e){var t=this,n=e.weeks,i=e.days;if(this._useDayLayout(n,i)&&this._isDayLayout()){var r=7*n+i;this._updateCountdownElement("days",r)}else this._useDayLayout(n,i)||!this._isDayLayout()?Object.keys(e).forEach(function(n){t._updateCountdownElement(n,e[n])}):this._renderFullCountdownLayout(e)}},{key:"_updateCountdownElement",value:function(e,n){if(this._numberElements[e]&&(!this._previousCountdownProps||this._previousCountdownProps[e]!==n)){var i=t.SINGULAR_UNITS[e];this._numberElements[e].innerText=this._allowLeadingZeroValue(e)?this._leadingZero(n):n,this._unitElements[e].innerText=this._pluralize(i,n)}}},{key:"_renderFullCountdownLayout",value:function(e){var t=e.days,n=e.hours,i=e.minutes,r=e.seconds;this._clock.innerHTML='<div class="box clock-item day"><div class="number">'+t+'</div><div class="unit">'+this._pluralize("day",t)+'</div></div><div class="box clock-item hour"><div class="number">'+this._leadingZero(n)+'</div><div class="unit">'+this._pluralize("hour",n)+'</div></div><div class="box clock-item minute"><div class="number">'+this._leadingZero(i)+'</div><div class="unit">'+this._pluralize("min",i)+'</div></div><div class="box clock-item second"><div class="number">'+this._leadingZero(r)+'</div><div class="unit">'+this._pluralize("sec",r)+"</div></div>",this._iterateElementObject()}},{key:"_useDayLayout",value:function(e,t){return e>=1||t>=2}},{key:"_isDayLayout",value:function(){return this._numberElements.days&&!this._numberElements.hours}},{key:"_allowLeadingZeroValue",value:function(e){return"days"!==e}},{key:"_determineCountdownInterval",value:function(e){return this._calcDays(e)>2?36e5:1e3}},{key:"_determineToUpdateInterval",value:function(e,t){return e>1e3&&t<2}},{key:"_calcDays",value:function(e){return Math.floor(e/864e5)+1}},{key:"_calcTimeDuration",value:function(e){return e.getTime()-Date.now()}},{key:"_pluralize",value:function(e,t){return e+(1===t?"":"s")}},{key:"_leadingZero",value:function(e){return(e<10?"0":"")+e}}]),t}();function n(e){var t=e.querySelector(".js-progressCircular");t&&new Waypoint.Inview({element:t,entered:function(){var e=Number(t.dataset.percentage);!function(e,t){var n=e.querySelector(".js-filledOutIndicator"),i=n.getAttribute("r"),r=Math.PI*(2*i),o=(100-t)/100*r;100===t&&e.classList.add("progressCircular--complete");n.setAttribute("style","stroke-dashoffset: "+o+"px")}(t,e)}})}function i(){document.querySelectorAll(".card--course").forEach(function(e){!function(e){var n=e.querySelector(".js-countdownClock .clock");if(n){var i=e.dataset.closeTimestamp;new t(n,i,function(){e.classList.add("card--disabled"),e.querySelector(".js-cardActionText").textContent="Closed for enrollment"})}}(e),n(e)})}if("loading"===document.readyState){document.addEventListener("DOMContentLoaded",function e(){document.removeEventListener("DOMContentLoaded",e),i()})}else i()})});
//# sourceMappingURL=course.js.map
