"use strict";var _createClass=function(){function e(e,t){for(var r=0;r<t.length;r++){var i=t[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,r,i){return r&&e(t.prototype,r),i&&e(t,i),t}}();function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}require(["require.config"],function(){return new(function(){function e(){_classCallCheck(this,e),this.header=document.querySelector(".js-navHeader"),this.mobileHeader=document.querySelector(".js-mobile-header"),this.courseBar=document.querySelector(".courseStickyBar"),this.isLoggedIn=Boolean(document.querySelector(".logged-in")),this.header&&this.mobileHeader&&(this.prevScroll=window.scrollY,this.scrollDistance=0,this.onScroll=this.onScroll.bind(this),this.addEventListener())}return _createClass(e,null,[{key:"BUFFER_HEIGHT",get:function(){return 48}},{key:"MOBILE_COLLAPSED_CLASS",get:function(){return"mobileHeader--collapsed"}},{key:"DESKTOP_COLLAPSED_CLASS",get:function(){return"navHeader--collapsed"}},{key:"COURSE_VISIBLE_CLASS",get:function(){return"courseStickyBar--visible"}},{key:"MOBILE_MQ",get:function(){return"(max-width: 768px)"}}]),_createClass(e,[{key:"testPassive",value:function(){var e=!1;try{var t=Object.defineProperty({},"passive",{get:function(){return e=!0}});window.addEventListener("test",null,t)}catch(e){}return e}},{key:"addEventListener",value:function(){window.addEventListener("scroll",this.onScroll,!!this.testPassive()&&{passive:!0})}},{key:"isSmallScreen",value:function(){return window.matchMedia(e.MOBILE_MQ).matches}},{key:"onScroll",value:function(){var e=this;requestAnimationFrame(function(){e.measureScroll(),e.toggleHeaderState(),e.courseBar&&e.toggleCourseBarState()})}},{key:"measureScroll",value:function(){var e=window.scrollY,t=this.prevScroll-e,r=void 0;r=t<0?"down":"up",this.prevDirection!==r&&(this.scrollDistance=0),this.scrollDistance+=Math.abs(t),this.prevDirection=r,this.prevScroll=e}},{key:"toggleHeaderState",value:function(){if(window.scrollY>e.BUFFER_HEIGHT?this.header.classList.add(e.DESKTOP_COLLAPSED_CLASS):this.header.classList.remove(e.DESKTOP_COLLAPSED_CLASS),this.isSmallScreen()&&this.isLoggedIn){if(window.scrollY<=0)return void this.mobileHeader.classList.remove(e.MOBILE_COLLAPSED_CLASS);if(this.scrollDistance<e.BUFFER_HEIGHT)return;"down"===this.prevDirection&&this.mobileHeader.classList.add(e.MOBILE_COLLAPSED_CLASS),"up"===this.prevDirection&&this.mobileHeader.classList.remove(e.MOBILE_COLLAPSED_CLASS)}}},{key:"toggleCourseBarState",value:function(){window.scrollY>e.BUFFER_HEIGHT?this.courseBar.classList.add(e.COURSE_VISIBLE_CLASS):this.courseBar.classList.remove(e.COURSE_VISIBLE_CLASS)}}]),e}())});